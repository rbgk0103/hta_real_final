<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace='adm'>
	<select id = 'select_table' resultType="bean.TblVo"> <!-- 리스트 검색(select) -->
		select table_status.* , 
		guest.guest_gender , guest.guest_cnt , guest.guest_no , guest.guest_status
		from table_status table_status 
		left outer join guest guest 
		on guest.table_no = table_status.tbl_no
		and guest.guest_status = 1 
	</select>
	<select id = 'select_orders_table' resultType="bean.OrdersVo">
		select *
		from orders orders 
		join orders_set orders_set 
		on orders_set.ord_no = orders.ord_no
	</select>

	<update id="table_status_on" parameterType="int">
		update table_status set tbl_status = 1  where tbl_no = #{_parameter}
	</update>
	
	<update id="table_status_off" parameterType="int">
		update table_status set tbl_status = 0  where tbl_no = #{_parameter}
	</update>
	
	<insert id="guest_insert" parameterType="bean.GuestVo">
		insert into guest values(seq_guest.nextval , #{table_no} , #{guest_gender} , #{guest_cnt} , 1 , 0 )
	</insert>
	
	<update id ="guest_status_update" parameterType="bean.GuestVo">
		update guest set guest_status = 2 where table_no = #{table_no} and guest_no = ${guest_no}
	</update>
</mapper>